<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-2"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Torch.Internal.Managed.Optim</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Foreign</span></span><span>
</span><span id="line-5"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Foreign.C.String</span></span><span>
</span><span id="line-6"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Foreign.C.Types</span></span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Foreign.ForeignPtr.Unsafe</span></span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Torch.Internal.Cast.html"><span class="hs-identifier">Torch.Internal.Cast</span></a></span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Torch.Internal.Class.html"><span class="hs-identifier">Torch.Internal.Class</span></a></span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Torch.Internal.Objects.html"><span class="hs-identifier">Torch.Internal.Objects</span></a></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Torch.Internal.Type.html"><span class="hs-identifier">Torch.Internal.Type</span></a></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Torch.Internal.Unmanaged.Optim.html"><span class="hs-identifier">Torch.Internal.Unmanaged.Optim</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Unmanaged</span></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Concurrent.MVar</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MVar</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">newEmptyMVar</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">putMVar</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">takeMVar</span></span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-comment">-- optimizerWithAdam</span><span>
</span><span id="line-16"></span><span class="hs-comment">--   :: CDouble</span><span>
</span><span id="line-17"></span><span class="hs-comment">--   -&gt; CDouble</span><span>
</span><span id="line-18"></span><span class="hs-comment">--   -&gt; CDouble</span><span>
</span><span id="line-19"></span><span class="hs-comment">--   -&gt; CDouble</span><span>
</span><span id="line-20"></span><span class="hs-comment">--   -&gt; CDouble</span><span>
</span><span id="line-21"></span><span class="hs-comment">--   -&gt; CBool</span><span>
</span><span id="line-22"></span><span class="hs-comment">--   -&gt; ForeignPtr TensorList</span><span>
</span><span id="line-23"></span><span class="hs-comment">--   -&gt; (ForeignPtr TensorList -&gt; IO (ForeignPtr Tensor))</span><span>
</span><span id="line-24"></span><span class="hs-comment">--   -&gt; Int</span><span>
</span><span id="line-25"></span><span class="hs-comment">--   -&gt; IO (ForeignPtr TensorList)</span><span>
</span><span id="line-26"></span><span class="hs-comment">-- optimizerWithAdam adamLr adamBetas0 adamBetas1 adamEps adamWeightDecay adamAmsgrad initParams loss numIter = cast2 (\i n -&gt; Unmanaged.optimizerWithAdam adamLr adamBetas0 adamBetas1 adamEps adamWeightDecay adamAmsgrad i (trans loss) n) initParams numIter</span><span>
</span><span id="line-27"></span><span class="hs-comment">--   where</span><span>
</span><span id="line-28"></span><span class="hs-comment">--     trans :: (ForeignPtr TensorList -&gt; IO (ForeignPtr Tensor)) -&gt; Ptr TensorList -&gt; IO (Ptr Tensor)</span><span>
</span><span id="line-29"></span><span class="hs-comment">--     trans func inputs = do</span><span>
</span><span id="line-30"></span><span class="hs-comment">--       inputs' &lt;- newForeignPtr_ inputs</span><span>
</span><span id="line-31"></span><span class="hs-comment">--       ret &lt;- func inputs'</span><span>
</span><span id="line-32"></span><span class="hs-comment">--       return $ unsafeForeignPtrToPtr ret</span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span class="annot"><a href="Torch.Internal.Managed.Optim.html#adagrad"><span class="hs-identifier hs-type">adagrad</span></a></span><span>
</span><span id="line-35"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CDouble</span></span><span>
</span><span id="line-36"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CDouble</span></span><span>
</span><span id="line-37"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CDouble</span></span><span>
</span><span id="line-38"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CDouble</span></span><span>
</span><span id="line-39"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CDouble</span></span><span>
</span><span id="line-40"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#TensorList"><span class="hs-identifier hs-type">TensorList</span></a></span><span>
</span><span id="line-41"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#Optimizer"><span class="hs-identifier hs-type">Optimizer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span id="adagrad"><span class="annot"><span class="annottext">adagrad :: CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; ForeignPtr TensorList
-&gt; IO (ForeignPtr Optimizer)
</span><a href="Torch.Internal.Managed.Optim.html#adagrad"><span class="hs-identifier hs-var hs-var">adagrad</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CDouble
 -&gt; CDouble
 -&gt; CDouble
 -&gt; CDouble
 -&gt; CDouble
 -&gt; Ptr TensorList
 -&gt; IO (Ptr Optimizer))
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; ForeignPtr TensorList
-&gt; IO (ForeignPtr Optimizer)
forall a ca x1 cx1 x2 cx2 x3 cx3 x4 cx4 x5 cx5 y cy.
(Castable a ca, Castable x1 cx1, Castable x2 cx2, Castable x3 cx3,
 Castable x4 cx4, Castable x5 cx5, Castable y cy) =&gt;
(ca -&gt; cx1 -&gt; cx2 -&gt; cx3 -&gt; cx4 -&gt; cx5 -&gt; IO cy)
-&gt; a -&gt; x1 -&gt; x2 -&gt; x3 -&gt; x4 -&gt; x5 -&gt; IO y
</span><a href="Torch.Internal.Cast.html#cast6"><span class="hs-identifier hs-var">cast6</span></a></span><span> </span><span class="annot"><span class="annottext">CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; Ptr TensorList
-&gt; IO (Ptr Optimizer)
</span><a href="Torch.Internal.Unmanaged.Optim.html#adagrad"><span class="hs-identifier hs-var">Unmanaged.adagrad</span></a></span><span>
</span><span id="line-43"></span><span>
</span><span id="line-44"></span><span class="annot"><a href="Torch.Internal.Managed.Optim.html#rmsprop"><span class="hs-identifier hs-type">rmsprop</span></a></span><span>
</span><span id="line-45"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CDouble</span></span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CDouble</span></span><span>
</span><span id="line-47"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CDouble</span></span><span>
</span><span id="line-48"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CDouble</span></span><span>
</span><span id="line-49"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CDouble</span></span><span>
</span><span id="line-50"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CBool</span></span><span>
</span><span id="line-51"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#TensorList"><span class="hs-identifier hs-type">TensorList</span></a></span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#Optimizer"><span class="hs-identifier hs-type">Optimizer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span id="rmsprop"><span class="annot"><span class="annottext">rmsprop :: CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CBool
-&gt; ForeignPtr TensorList
-&gt; IO (ForeignPtr Optimizer)
</span><a href="Torch.Internal.Managed.Optim.html#rmsprop"><span class="hs-identifier hs-var hs-var">rmsprop</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CDouble
 -&gt; CDouble
 -&gt; CDouble
 -&gt; CDouble
 -&gt; CDouble
 -&gt; CBool
 -&gt; Ptr TensorList
 -&gt; IO (Ptr Optimizer))
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CBool
-&gt; ForeignPtr TensorList
-&gt; IO (ForeignPtr Optimizer)
forall a ca x1 cx1 x2 cx2 x3 cx3 x4 cx4 x5 cx5 x6 cx6 y cy.
(Castable a ca, Castable x1 cx1, Castable x2 cx2, Castable x3 cx3,
 Castable x4 cx4, Castable x5 cx5, Castable x6 cx6,
 Castable y cy) =&gt;
(ca -&gt; cx1 -&gt; cx2 -&gt; cx3 -&gt; cx4 -&gt; cx5 -&gt; cx6 -&gt; IO cy)
-&gt; a -&gt; x1 -&gt; x2 -&gt; x3 -&gt; x4 -&gt; x5 -&gt; x6 -&gt; IO y
</span><a href="Torch.Internal.Cast.html#cast7"><span class="hs-identifier hs-var">cast7</span></a></span><span> </span><span class="annot"><span class="annottext">CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CBool
-&gt; Ptr TensorList
-&gt; IO (Ptr Optimizer)
</span><a href="Torch.Internal.Unmanaged.Optim.html#rmsprop"><span class="hs-identifier hs-var">Unmanaged.rmsprop</span></a></span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span class="annot"><a href="Torch.Internal.Managed.Optim.html#sgd"><span class="hs-identifier hs-type">sgd</span></a></span><span>
</span><span id="line-56"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CDouble</span></span><span>
</span><span id="line-57"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CDouble</span></span><span>
</span><span id="line-58"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CDouble</span></span><span>
</span><span id="line-59"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CDouble</span></span><span>
</span><span id="line-60"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CBool</span></span><span>
</span><span id="line-61"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#TensorList"><span class="hs-identifier hs-type">TensorList</span></a></span><span>
</span><span id="line-62"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#Optimizer"><span class="hs-identifier hs-type">Optimizer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span id="sgd"><span class="annot"><span class="annottext">sgd :: CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CBool
-&gt; ForeignPtr TensorList
-&gt; IO (ForeignPtr Optimizer)
</span><a href="Torch.Internal.Managed.Optim.html#sgd"><span class="hs-identifier hs-var hs-var">sgd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CDouble
 -&gt; CDouble
 -&gt; CDouble
 -&gt; CDouble
 -&gt; CBool
 -&gt; Ptr TensorList
 -&gt; IO (Ptr Optimizer))
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CBool
-&gt; ForeignPtr TensorList
-&gt; IO (ForeignPtr Optimizer)
forall a ca x1 cx1 x2 cx2 x3 cx3 x4 cx4 x5 cx5 y cy.
(Castable a ca, Castable x1 cx1, Castable x2 cx2, Castable x3 cx3,
 Castable x4 cx4, Castable x5 cx5, Castable y cy) =&gt;
(ca -&gt; cx1 -&gt; cx2 -&gt; cx3 -&gt; cx4 -&gt; cx5 -&gt; IO cy)
-&gt; a -&gt; x1 -&gt; x2 -&gt; x3 -&gt; x4 -&gt; x5 -&gt; IO y
</span><a href="Torch.Internal.Cast.html#cast6"><span class="hs-identifier hs-var">cast6</span></a></span><span> </span><span class="annot"><span class="annottext">CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CBool
-&gt; Ptr TensorList
-&gt; IO (Ptr Optimizer)
</span><a href="Torch.Internal.Unmanaged.Optim.html#sgd"><span class="hs-identifier hs-var">Unmanaged.sgd</span></a></span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span class="annot"><a href="Torch.Internal.Managed.Optim.html#adam"><span class="hs-identifier hs-type">adam</span></a></span><span>
</span><span id="line-66"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CDouble</span></span><span>
</span><span id="line-67"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CDouble</span></span><span>
</span><span id="line-68"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CDouble</span></span><span>
</span><span id="line-69"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CDouble</span></span><span>
</span><span id="line-70"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CDouble</span></span><span>
</span><span id="line-71"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CBool</span></span><span>
</span><span id="line-72"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#TensorList"><span class="hs-identifier hs-type">TensorList</span></a></span><span>
</span><span id="line-73"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#Optimizer"><span class="hs-identifier hs-type">Optimizer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span id="adam"><span class="annot"><span class="annottext">adam :: CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CBool
-&gt; ForeignPtr TensorList
-&gt; IO (ForeignPtr Optimizer)
</span><a href="Torch.Internal.Managed.Optim.html#adam"><span class="hs-identifier hs-var hs-var">adam</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CDouble
 -&gt; CDouble
 -&gt; CDouble
 -&gt; CDouble
 -&gt; CDouble
 -&gt; CBool
 -&gt; Ptr TensorList
 -&gt; IO (Ptr Optimizer))
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CBool
-&gt; ForeignPtr TensorList
-&gt; IO (ForeignPtr Optimizer)
forall a ca x1 cx1 x2 cx2 x3 cx3 x4 cx4 x5 cx5 x6 cx6 y cy.
(Castable a ca, Castable x1 cx1, Castable x2 cx2, Castable x3 cx3,
 Castable x4 cx4, Castable x5 cx5, Castable x6 cx6,
 Castable y cy) =&gt;
(ca -&gt; cx1 -&gt; cx2 -&gt; cx3 -&gt; cx4 -&gt; cx5 -&gt; cx6 -&gt; IO cy)
-&gt; a -&gt; x1 -&gt; x2 -&gt; x3 -&gt; x4 -&gt; x5 -&gt; x6 -&gt; IO y
</span><a href="Torch.Internal.Cast.html#cast7"><span class="hs-identifier hs-var">cast7</span></a></span><span> </span><span class="annot"><span class="annottext">CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CBool
-&gt; Ptr TensorList
-&gt; IO (Ptr Optimizer)
</span><a href="Torch.Internal.Unmanaged.Optim.html#adam"><span class="hs-identifier hs-var">Unmanaged.adam</span></a></span><span>
</span><span id="line-75"></span><span>
</span><span id="line-76"></span><span class="annot"><a href="Torch.Internal.Managed.Optim.html#adamw"><span class="hs-identifier hs-type">adamw</span></a></span><span>
</span><span id="line-77"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CDouble</span></span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CDouble</span></span><span>
</span><span id="line-79"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CDouble</span></span><span>
</span><span id="line-80"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CDouble</span></span><span>
</span><span id="line-81"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CDouble</span></span><span>
</span><span id="line-82"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CBool</span></span><span>
</span><span id="line-83"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#TensorList"><span class="hs-identifier hs-type">TensorList</span></a></span><span>
</span><span id="line-84"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#Optimizer"><span class="hs-identifier hs-type">Optimizer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span id="adamw"><span class="annot"><span class="annottext">adamw :: CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CBool
-&gt; ForeignPtr TensorList
-&gt; IO (ForeignPtr Optimizer)
</span><a href="Torch.Internal.Managed.Optim.html#adamw"><span class="hs-identifier hs-var hs-var">adamw</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CDouble
 -&gt; CDouble
 -&gt; CDouble
 -&gt; CDouble
 -&gt; CDouble
 -&gt; CBool
 -&gt; Ptr TensorList
 -&gt; IO (Ptr Optimizer))
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CBool
-&gt; ForeignPtr TensorList
-&gt; IO (ForeignPtr Optimizer)
forall a ca x1 cx1 x2 cx2 x3 cx3 x4 cx4 x5 cx5 x6 cx6 y cy.
(Castable a ca, Castable x1 cx1, Castable x2 cx2, Castable x3 cx3,
 Castable x4 cx4, Castable x5 cx5, Castable x6 cx6,
 Castable y cy) =&gt;
(ca -&gt; cx1 -&gt; cx2 -&gt; cx3 -&gt; cx4 -&gt; cx5 -&gt; cx6 -&gt; IO cy)
-&gt; a -&gt; x1 -&gt; x2 -&gt; x3 -&gt; x4 -&gt; x5 -&gt; x6 -&gt; IO y
</span><a href="Torch.Internal.Cast.html#cast7"><span class="hs-identifier hs-var">cast7</span></a></span><span> </span><span class="annot"><span class="annottext">CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CDouble
-&gt; CBool
-&gt; Ptr TensorList
-&gt; IO (Ptr Optimizer)
</span><a href="Torch.Internal.Unmanaged.Optim.html#adamw"><span class="hs-identifier hs-var">Unmanaged.adamw</span></a></span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span class="annot"><a href="Torch.Internal.Managed.Optim.html#lbfgs"><span class="hs-identifier hs-type">lbfgs</span></a></span><span>
</span><span id="line-88"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CDouble</span></span><span>
</span><span id="line-89"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CInt</span></span><span>
</span><span id="line-90"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CInt</span></span><span>
</span><span id="line-91"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CDouble</span></span><span>
</span><span id="line-92"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CDouble</span></span><span>
</span><span id="line-93"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CInt</span></span><span>
</span><span id="line-94"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#StdString"><span class="hs-identifier hs-type">StdString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-95"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#TensorList"><span class="hs-identifier hs-type">TensorList</span></a></span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#Optimizer"><span class="hs-identifier hs-type">Optimizer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span id="lbfgs"><span class="annot"><span class="annottext">lbfgs :: CDouble
-&gt; CInt
-&gt; CInt
-&gt; CDouble
-&gt; CDouble
-&gt; CInt
-&gt; Maybe (ForeignPtr StdString)
-&gt; ForeignPtr TensorList
-&gt; IO (ForeignPtr Optimizer)
</span><a href="Torch.Internal.Managed.Optim.html#lbfgs"><span class="hs-identifier hs-var hs-var">lbfgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CDouble
 -&gt; CInt
 -&gt; CInt
 -&gt; CDouble
 -&gt; CDouble
 -&gt; CInt
 -&gt; Maybe (Ptr StdString)
 -&gt; Ptr TensorList
 -&gt; IO (Ptr Optimizer))
-&gt; CDouble
-&gt; CInt
-&gt; CInt
-&gt; CDouble
-&gt; CDouble
-&gt; CInt
-&gt; Maybe (ForeignPtr StdString)
-&gt; ForeignPtr TensorList
-&gt; IO (ForeignPtr Optimizer)
forall a ca x1 cx1 x2 cx2 x3 cx3 x4 cx4 x5 cx5 x6 cx6 x7 cx7 y cy.
(Castable a ca, Castable x1 cx1, Castable x2 cx2, Castable x3 cx3,
 Castable x4 cx4, Castable x5 cx5, Castable x6 cx6, Castable x7 cx7,
 Castable y cy) =&gt;
(ca -&gt; cx1 -&gt; cx2 -&gt; cx3 -&gt; cx4 -&gt; cx5 -&gt; cx6 -&gt; cx7 -&gt; IO cy)
-&gt; a -&gt; x1 -&gt; x2 -&gt; x3 -&gt; x4 -&gt; x5 -&gt; x6 -&gt; x7 -&gt; IO y
</span><a href="Torch.Internal.Cast.html#cast8"><span class="hs-identifier hs-var">cast8</span></a></span><span> </span><span class="annot"><span class="annottext">CDouble
-&gt; CInt
-&gt; CInt
-&gt; CDouble
-&gt; CDouble
-&gt; CInt
-&gt; Maybe (Ptr StdString)
-&gt; Ptr TensorList
-&gt; IO (Ptr Optimizer)
</span><a href="Torch.Internal.Unmanaged.Optim.html#lbfgs"><span class="hs-identifier hs-var">Unmanaged.lbfgs</span></a></span><span>
</span><span id="line-98"></span><span>
</span><span id="line-99"></span><span class="annot"><a href="Torch.Internal.Managed.Optim.html#getParams"><span class="hs-identifier hs-type">getParams</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#Optimizer"><span class="hs-identifier hs-type">Optimizer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#TensorList"><span class="hs-identifier hs-type">TensorList</span></a></span><span class="hs-special">)</span><span> </span><span>
</span><span id="line-100"></span><span id="getParams"><span class="annot"><span class="annottext">getParams :: ForeignPtr Optimizer -&gt; IO (ForeignPtr TensorList)
</span><a href="Torch.Internal.Managed.Optim.html#getParams"><span class="hs-identifier hs-var hs-var">getParams</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Ptr Optimizer -&gt; IO (Ptr TensorList))
-&gt; ForeignPtr Optimizer -&gt; IO (ForeignPtr TensorList)
forall a ca y cy.
(Castable a ca, Castable y cy) =&gt;
(ca -&gt; IO cy) -&gt; a -&gt; IO y
</span><a href="Torch.Internal.Cast.html#cast1"><span class="hs-identifier hs-var">cast1</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Optimizer -&gt; IO (Ptr TensorList)
</span><a href="Torch.Internal.Unmanaged.Optim.html#getParams"><span class="hs-identifier hs-var">Unmanaged.getParams</span></a></span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span class="annot"><a href="Torch.Internal.Managed.Optim.html#step"><span class="hs-identifier hs-type">step</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#Optimizer"><span class="hs-identifier hs-type">Optimizer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#TensorList"><span class="hs-identifier hs-type">TensorList</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#Tensor"><span class="hs-identifier hs-type">Tensor</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#Tensor"><span class="hs-identifier hs-type">Tensor</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-103"></span><span id="step"><span class="annot"><span class="annottext">step :: ForeignPtr Optimizer
-&gt; (ForeignPtr TensorList -&gt; IO (ForeignPtr Tensor))
-&gt; IO (ForeignPtr Tensor)
</span><a href="Torch.Internal.Managed.Optim.html#step"><span class="hs-identifier hs-var hs-var">step</span></a></span></span><span> </span><span id="local-6989586621685451299"><span class="annot"><span class="annottext">ForeignPtr Optimizer
</span><a href="#local-6989586621685451299"><span class="hs-identifier hs-var">optimizer</span></a></span></span><span> </span><span id="local-6989586621685451298"><span class="annot"><span class="annottext">ForeignPtr TensorList -&gt; IO (ForeignPtr Tensor)
</span><a href="#local-6989586621685451298"><span class="hs-identifier hs-var">loss</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-104"></span><span>  </span><span id="local-6989586621685451297"><span class="annot"><span class="annottext">MVar (ForeignPtr Tensor)
</span><a href="#local-6989586621685451297"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (MVar (ForeignPtr Tensor))
forall a. IO (MVar a)
</span><span class="hs-identifier hs-var">newEmptyMVar</span></span><span>
</span><span id="line-105"></span><span>  </span><span id="local-6989586621685451296"><span class="annot"><span class="annottext">ForeignPtr Tensor
</span><a href="#local-6989586621685451296"><span class="hs-identifier hs-var">ret</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Ptr Optimizer -&gt; IO (Ptr Tensor))
-&gt; ForeignPtr Optimizer -&gt; IO (ForeignPtr Tensor)
forall a ca y cy.
(Castable a ca, Castable y cy) =&gt;
(ca -&gt; IO cy) -&gt; a -&gt; IO y
</span><a href="Torch.Internal.Cast.html#cast1"><span class="hs-identifier hs-var">cast1</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621685451295"><span class="annot"><span class="annottext">Ptr Optimizer
</span><a href="#local-6989586621685451295"><span class="hs-identifier hs-var">opt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ptr Optimizer
-&gt; (Ptr TensorList -&gt; IO (Ptr Tensor)) -&gt; IO (Ptr Tensor)
</span><a href="Torch.Internal.Unmanaged.Optim.html#step"><span class="hs-identifier hs-var">Unmanaged.step</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Optimizer
</span><a href="#local-6989586621685451295"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MVar (ForeignPtr Tensor)
-&gt; (ForeignPtr TensorList -&gt; IO (ForeignPtr Tensor))
-&gt; Ptr TensorList
-&gt; IO (Ptr Tensor)
</span><a href="#local-6989586621685451293"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="annot"><span class="annottext">MVar (ForeignPtr Tensor)
</span><a href="#local-6989586621685451297"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr TensorList -&gt; IO (ForeignPtr Tensor)
</span><a href="#local-6989586621685451298"><span class="hs-identifier hs-var">loss</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ForeignPtr Optimizer
</span><a href="#local-6989586621685451299"><span class="hs-identifier hs-var">optimizer</span></a></span><span>
</span><span id="line-106"></span><span>  </span><span id="local-6989586621685451292"><span class="annot"><span class="annottext">ForeignPtr Tensor
</span><a href="#local-6989586621685451292"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MVar (ForeignPtr Tensor) -&gt; IO (ForeignPtr Tensor)
forall a. MVar a -&gt; IO a
</span><span class="hs-identifier hs-var">takeMVar</span></span><span> </span><span class="annot"><span class="annottext">MVar (ForeignPtr Tensor)
</span><a href="#local-6989586621685451297"><span class="hs-identifier hs-var">ref</span></a></span><span>
</span><span id="line-107"></span><span>  </span><span class="annot"><span class="annottext">ForeignPtr Tensor -&gt; IO ()
forall a. ForeignPtr a -&gt; IO ()
</span><span class="hs-identifier hs-var">touchForeignPtr</span></span><span> </span><span class="annot"><span class="annottext">ForeignPtr Tensor
</span><a href="#local-6989586621685451292"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-108"></span><span>  </span><span class="annot"><span class="annottext">ForeignPtr Tensor -&gt; IO (ForeignPtr Tensor)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">ForeignPtr Tensor
</span><a href="#local-6989586621685451296"><span class="hs-identifier hs-var">ret</span></a></span><span>
</span><span id="line-109"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-110"></span><span>    </span><span class="annot"><a href="#local-6989586621685451293"><span class="hs-identifier hs-type">trans</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MVar</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#Tensor"><span class="hs-identifier hs-type">Tensor</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#TensorList"><span class="hs-identifier hs-type">TensorList</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#Tensor"><span class="hs-identifier hs-type">Tensor</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ptr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#TensorList"><span class="hs-identifier hs-type">TensorList</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ptr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#Tensor"><span class="hs-identifier hs-type">Tensor</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-111"></span><span>    </span><span id="local-6989586621685451293"><span class="annot"><span class="annottext">trans :: MVar (ForeignPtr Tensor)
-&gt; (ForeignPtr TensorList -&gt; IO (ForeignPtr Tensor))
-&gt; Ptr TensorList
-&gt; IO (Ptr Tensor)
</span><a href="#local-6989586621685451293"><span class="hs-identifier hs-var hs-var">trans</span></a></span></span><span> </span><span id="local-6989586621685451290"><span class="annot"><span class="annottext">MVar (ForeignPtr Tensor)
</span><a href="#local-6989586621685451290"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span id="local-6989586621685451289"><span class="annot"><span class="annottext">ForeignPtr TensorList -&gt; IO (ForeignPtr Tensor)
</span><a href="#local-6989586621685451289"><span class="hs-identifier hs-var">func</span></a></span></span><span> </span><span id="local-6989586621685451288"><span class="annot"><span class="annottext">Ptr TensorList
</span><a href="#local-6989586621685451288"><span class="hs-identifier hs-var">inputs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-112"></span><span>      </span><span id="local-6989586621685451287"><span class="annot"><span class="annottext">ForeignPtr TensorList
</span><a href="#local-6989586621685451287"><span class="hs-identifier hs-var">inputs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr TensorList -&gt; IO (ForeignPtr TensorList)
forall a. Ptr a -&gt; IO (ForeignPtr a)
</span><span class="hs-identifier hs-var">newForeignPtr_</span></span><span> </span><span class="annot"><span class="annottext">Ptr TensorList
</span><a href="#local-6989586621685451288"><span class="hs-identifier hs-var">inputs</span></a></span><span>
</span><span id="line-113"></span><span>      </span><span id="local-6989586621685451285"><span class="annot"><span class="annottext">ForeignPtr Tensor
</span><a href="#local-6989586621685451285"><span class="hs-identifier hs-var">ret</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ForeignPtr TensorList -&gt; IO (ForeignPtr Tensor)
</span><a href="#local-6989586621685451289"><span class="hs-identifier hs-var">func</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr TensorList
</span><a href="#local-6989586621685451287"><span class="hs-identifier hs-var">inputs'</span></a></span><span>
</span><span id="line-114"></span><span>      </span><span class="annot"><span class="annottext">MVar (ForeignPtr Tensor) -&gt; ForeignPtr Tensor -&gt; IO ()
forall a. MVar a -&gt; a -&gt; IO ()
</span><span class="hs-identifier hs-var">putMVar</span></span><span> </span><span class="annot"><span class="annottext">MVar (ForeignPtr Tensor)
</span><a href="#local-6989586621685451290"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr Tensor
</span><a href="#local-6989586621685451285"><span class="hs-identifier hs-var">ret</span></a></span><span>
</span><span id="line-115"></span><span>      </span><span class="annot"><span class="annottext">Ptr Tensor -&gt; IO (Ptr Tensor)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Ptr Tensor -&gt; IO (Ptr Tensor)) -&gt; Ptr Tensor -&gt; IO (Ptr Tensor)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ForeignPtr Tensor -&gt; Ptr Tensor
forall a. ForeignPtr a -&gt; Ptr a
</span><span class="hs-identifier hs-var">unsafeForeignPtrToPtr</span></span><span> </span><span class="annot"><span class="annottext">ForeignPtr Tensor
</span><a href="#local-6989586621685451285"><span class="hs-identifier hs-var">ret</span></a></span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span class="annot"><a href="Torch.Internal.Managed.Optim.html#stepWithGenerator"><span class="hs-identifier hs-type">stepWithGenerator</span></a></span><span>
</span><span id="line-118"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#Optimizer"><span class="hs-identifier hs-type">Optimizer</span></a></span><span>
</span><span id="line-119"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#Generator"><span class="hs-identifier hs-type">Generator</span></a></span><span>
</span><span id="line-120"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#TensorList"><span class="hs-identifier hs-type">TensorList</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#Generator"><span class="hs-identifier hs-type">Generator</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Torch.Internal.Type.html#StdTuple"><span class="hs-identifier hs-type">StdTuple</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">(</span><span class="annot"><a href="Torch.Internal.Type.html#Tensor"><span class="hs-identifier hs-type">Tensor</span></a></span><span class="hs-special">,</span><span class="annot"><a href="Torch.Internal.Type.html#Generator"><span class="hs-identifier hs-type">Generator</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-121"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Torch.Internal.Type.html#StdTuple"><span class="hs-identifier hs-type">StdTuple</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">(</span><span class="annot"><a href="Torch.Internal.Type.html#Tensor"><span class="hs-identifier hs-type">Tensor</span></a></span><span class="hs-special">,</span><span class="annot"><a href="Torch.Internal.Type.html#Generator"><span class="hs-identifier hs-type">Generator</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-122"></span><span id="stepWithGenerator"><span class="annot"><span class="annottext">stepWithGenerator :: ForeignPtr Optimizer
-&gt; ForeignPtr Generator
-&gt; (ForeignPtr TensorList
    -&gt; ForeignPtr Generator
    -&gt; IO (ForeignPtr (StdTuple '(Tensor, Generator))))
-&gt; IO (ForeignPtr (StdTuple '(Tensor, Generator)))
</span><a href="Torch.Internal.Managed.Optim.html#stepWithGenerator"><span class="hs-identifier hs-var hs-var">stepWithGenerator</span></a></span></span><span> </span><span id="local-6989586621685451282"><span class="annot"><span class="annottext">ForeignPtr Optimizer
</span><a href="#local-6989586621685451282"><span class="hs-identifier hs-var">optimizer</span></a></span></span><span> </span><span id="local-6989586621685451281"><span class="annot"><span class="annottext">ForeignPtr Generator
</span><a href="#local-6989586621685451281"><span class="hs-identifier hs-var">generator</span></a></span></span><span> </span><span id="local-6989586621685451280"><span class="annot"><span class="annottext">ForeignPtr TensorList
-&gt; ForeignPtr Generator
-&gt; IO (ForeignPtr (StdTuple '(Tensor, Generator)))
</span><a href="#local-6989586621685451280"><span class="hs-identifier hs-var">loss</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-123"></span><span>  </span><span id="local-6989586621685451279"><span class="annot"><span class="annottext">MVar (ForeignPtr (StdTuple '(Tensor, Generator)))
</span><a href="#local-6989586621685451279"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (MVar (ForeignPtr (StdTuple '(Tensor, Generator))))
forall a. IO (MVar a)
</span><span class="hs-identifier hs-var">newEmptyMVar</span></span><span>
</span><span id="line-124"></span><span>  </span><span id="local-6989586621685451278"><span class="annot"><span class="annottext">ForeignPtr (StdTuple '(Tensor, Generator))
</span><a href="#local-6989586621685451278"><span class="hs-identifier hs-var">ret</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Ptr Optimizer
 -&gt; Ptr Generator -&gt; IO (Ptr (StdTuple '(Tensor, Generator))))
-&gt; ForeignPtr Optimizer
-&gt; ForeignPtr Generator
-&gt; IO (ForeignPtr (StdTuple '(Tensor, Generator)))
forall a ca x1 cx1 y cy.
(Castable a ca, Castable x1 cx1, Castable y cy) =&gt;
(ca -&gt; cx1 -&gt; IO cy) -&gt; a -&gt; x1 -&gt; IO y
</span><a href="Torch.Internal.Cast.html#cast2"><span class="hs-identifier hs-var">cast2</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621685451276"><span class="annot"><span class="annottext">Ptr Optimizer
</span><a href="#local-6989586621685451276"><span class="hs-identifier hs-var">opt</span></a></span></span><span> </span><span id="local-6989586621685451275"><span class="annot"><span class="annottext">Ptr Generator
</span><a href="#local-6989586621685451275"><span class="hs-identifier hs-var">gen</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ptr Optimizer
-&gt; Ptr Generator
-&gt; (Ptr TensorList
    -&gt; Ptr Generator -&gt; IO (Ptr (StdTuple '(Tensor, Generator))))
-&gt; IO (Ptr (StdTuple '(Tensor, Generator)))
</span><a href="Torch.Internal.Unmanaged.Optim.html#stepWithGenerator"><span class="hs-identifier hs-var">Unmanaged.stepWithGenerator</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Optimizer
</span><a href="#local-6989586621685451276"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Generator
</span><a href="#local-6989586621685451275"><span class="hs-identifier hs-var">gen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MVar (ForeignPtr (StdTuple '(Tensor, Generator)))
-&gt; (ForeignPtr TensorList
    -&gt; ForeignPtr Generator
    -&gt; IO (ForeignPtr (StdTuple '(Tensor, Generator))))
-&gt; Ptr TensorList
-&gt; Ptr Generator
-&gt; IO (Ptr (StdTuple '(Tensor, Generator)))
</span><a href="#local-6989586621685451273"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="annot"><span class="annottext">MVar (ForeignPtr (StdTuple '(Tensor, Generator)))
</span><a href="#local-6989586621685451279"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr TensorList
-&gt; ForeignPtr Generator
-&gt; IO (ForeignPtr (StdTuple '(Tensor, Generator)))
</span><a href="#local-6989586621685451280"><span class="hs-identifier hs-var">loss</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ForeignPtr Optimizer
</span><a href="#local-6989586621685451282"><span class="hs-identifier hs-var">optimizer</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr Generator
</span><a href="#local-6989586621685451281"><span class="hs-identifier hs-var">generator</span></a></span><span>
</span><span id="line-125"></span><span>  </span><span id="local-6989586621685451272"><span class="annot"><span class="annottext">ForeignPtr (StdTuple '(Tensor, Generator))
</span><a href="#local-6989586621685451272"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MVar (ForeignPtr (StdTuple '(Tensor, Generator)))
-&gt; IO (ForeignPtr (StdTuple '(Tensor, Generator)))
forall a. MVar a -&gt; IO a
</span><span class="hs-identifier hs-var">takeMVar</span></span><span> </span><span class="annot"><span class="annottext">MVar (ForeignPtr (StdTuple '(Tensor, Generator)))
</span><a href="#local-6989586621685451279"><span class="hs-identifier hs-var">ref</span></a></span><span>
</span><span id="line-126"></span><span>  </span><span class="annot"><span class="annottext">ForeignPtr (StdTuple '(Tensor, Generator)) -&gt; IO ()
forall a. ForeignPtr a -&gt; IO ()
</span><span class="hs-identifier hs-var">touchForeignPtr</span></span><span> </span><span class="annot"><span class="annottext">ForeignPtr (StdTuple '(Tensor, Generator))
</span><a href="#local-6989586621685451272"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-127"></span><span>  </span><span class="annot"><span class="annottext">ForeignPtr (StdTuple '(Tensor, Generator))
-&gt; IO (ForeignPtr (StdTuple '(Tensor, Generator)))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">ForeignPtr (StdTuple '(Tensor, Generator))
</span><a href="#local-6989586621685451278"><span class="hs-identifier hs-var">ret</span></a></span><span>
</span><span id="line-128"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-129"></span><span>    </span><span class="annot"><a href="#local-6989586621685451273"><span class="hs-identifier hs-type">trans</span></a></span><span>
</span><span id="line-130"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MVar</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Torch.Internal.Type.html#StdTuple"><span class="hs-identifier hs-type">StdTuple</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">(</span><span class="annot"><a href="Torch.Internal.Type.html#Tensor"><span class="hs-identifier hs-type">Tensor</span></a></span><span class="hs-special">,</span><span class="annot"><a href="Torch.Internal.Type.html#Generator"><span class="hs-identifier hs-type">Generator</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-131"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#TensorList"><span class="hs-identifier hs-type">TensorList</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#Generator"><span class="hs-identifier hs-type">Generator</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Torch.Internal.Type.html#StdTuple"><span class="hs-identifier hs-type">StdTuple</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">(</span><span class="annot"><a href="Torch.Internal.Type.html#Tensor"><span class="hs-identifier hs-type">Tensor</span></a></span><span class="hs-special">,</span><span class="annot"><a href="Torch.Internal.Type.html#Generator"><span class="hs-identifier hs-type">Generator</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ptr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#TensorList"><span class="hs-identifier hs-type">TensorList</span></a></span><span>
</span><span id="line-133"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ptr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#Generator"><span class="hs-identifier hs-type">Generator</span></a></span><span>
</span><span id="line-134"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ptr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Torch.Internal.Type.html#StdTuple"><span class="hs-identifier hs-type">StdTuple</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">(</span><span class="annot"><a href="Torch.Internal.Type.html#Tensor"><span class="hs-identifier hs-type">Tensor</span></a></span><span class="hs-special">,</span><span class="annot"><a href="Torch.Internal.Type.html#Generator"><span class="hs-identifier hs-type">Generator</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span>    </span><span id="local-6989586621685451273"><span class="annot"><span class="annottext">trans :: MVar (ForeignPtr (StdTuple '(Tensor, Generator)))
-&gt; (ForeignPtr TensorList
    -&gt; ForeignPtr Generator
    -&gt; IO (ForeignPtr (StdTuple '(Tensor, Generator))))
-&gt; Ptr TensorList
-&gt; Ptr Generator
-&gt; IO (Ptr (StdTuple '(Tensor, Generator)))
</span><a href="#local-6989586621685451273"><span class="hs-identifier hs-var hs-var">trans</span></a></span></span><span> </span><span id="local-6989586621685451271"><span class="annot"><span class="annottext">MVar (ForeignPtr (StdTuple '(Tensor, Generator)))
</span><a href="#local-6989586621685451271"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span id="local-6989586621685451270"><span class="annot"><span class="annottext">ForeignPtr TensorList
-&gt; ForeignPtr Generator
-&gt; IO (ForeignPtr (StdTuple '(Tensor, Generator)))
</span><a href="#local-6989586621685451270"><span class="hs-identifier hs-var">func</span></a></span></span><span> </span><span id="local-6989586621685451269"><span class="annot"><span class="annottext">Ptr TensorList
</span><a href="#local-6989586621685451269"><span class="hs-identifier hs-var">inputs</span></a></span></span><span> </span><span id="local-6989586621685451268"><span class="annot"><span class="annottext">Ptr Generator
</span><a href="#local-6989586621685451268"><span class="hs-identifier hs-var">generator</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-136"></span><span>      </span><span id="local-6989586621685451267"><span class="annot"><span class="annottext">ForeignPtr TensorList
</span><a href="#local-6989586621685451267"><span class="hs-identifier hs-var">inputs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr TensorList -&gt; IO (ForeignPtr TensorList)
forall a. Ptr a -&gt; IO (ForeignPtr a)
</span><span class="hs-identifier hs-var">newForeignPtr_</span></span><span> </span><span class="annot"><span class="annottext">Ptr TensorList
</span><a href="#local-6989586621685451269"><span class="hs-identifier hs-var">inputs</span></a></span><span>
</span><span id="line-137"></span><span>      </span><span id="local-6989586621685451266"><span class="annot"><span class="annottext">ForeignPtr Generator
</span><a href="#local-6989586621685451266"><span class="hs-identifier hs-var">generator'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ptr Generator -&gt; IO (ForeignPtr Generator)
forall a. Ptr a -&gt; IO (ForeignPtr a)
</span><span class="hs-identifier hs-var">newForeignPtr_</span></span><span> </span><span class="annot"><span class="annottext">Ptr Generator
</span><a href="#local-6989586621685451268"><span class="hs-identifier hs-var">generator</span></a></span><span>
</span><span id="line-138"></span><span>      </span><span id="local-6989586621685451265"><span class="annot"><span class="annottext">ForeignPtr (StdTuple '(Tensor, Generator))
</span><a href="#local-6989586621685451265"><span class="hs-identifier hs-var">ret</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ForeignPtr TensorList
-&gt; ForeignPtr Generator
-&gt; IO (ForeignPtr (StdTuple '(Tensor, Generator)))
</span><a href="#local-6989586621685451270"><span class="hs-identifier hs-var">func</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr TensorList
</span><a href="#local-6989586621685451267"><span class="hs-identifier hs-var">inputs'</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr Generator
</span><a href="#local-6989586621685451266"><span class="hs-identifier hs-var">generator'</span></a></span><span>
</span><span id="line-139"></span><span>      </span><span class="annot"><span class="annottext">MVar (ForeignPtr (StdTuple '(Tensor, Generator)))
-&gt; ForeignPtr (StdTuple '(Tensor, Generator)) -&gt; IO ()
forall a. MVar a -&gt; a -&gt; IO ()
</span><span class="hs-identifier hs-var">putMVar</span></span><span> </span><span class="annot"><span class="annottext">MVar (ForeignPtr (StdTuple '(Tensor, Generator)))
</span><a href="#local-6989586621685451271"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignPtr (StdTuple '(Tensor, Generator))
</span><a href="#local-6989586621685451265"><span class="hs-identifier hs-var">ret</span></a></span><span>
</span><span id="line-140"></span><span>      </span><span class="annot"><span class="annottext">Ptr (StdTuple '(Tensor, Generator))
-&gt; IO (Ptr (StdTuple '(Tensor, Generator)))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Ptr (StdTuple '(Tensor, Generator))
 -&gt; IO (Ptr (StdTuple '(Tensor, Generator))))
-&gt; Ptr (StdTuple '(Tensor, Generator))
-&gt; IO (Ptr (StdTuple '(Tensor, Generator)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ForeignPtr (StdTuple '(Tensor, Generator))
-&gt; Ptr (StdTuple '(Tensor, Generator))
forall a. ForeignPtr a -&gt; Ptr a
</span><span class="hs-identifier hs-var">unsafeForeignPtrToPtr</span></span><span> </span><span class="annot"><span class="annottext">ForeignPtr (StdTuple '(Tensor, Generator))
</span><a href="#local-6989586621685451265"><span class="hs-identifier hs-var">ret</span></a></span><span>
</span><span id="line-141"></span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span class="annot"><a href="Torch.Internal.Managed.Optim.html#unsafeStep"><span class="hs-identifier hs-type">unsafeStep</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#Optimizer"><span class="hs-identifier hs-type">Optimizer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#TensorList"><span class="hs-identifier hs-type">TensorList</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#Tensor"><span class="hs-identifier hs-type">Tensor</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#TensorList"><span class="hs-identifier hs-type">TensorList</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span id="unsafeStep"><span class="annot"><span class="annottext">unsafeStep :: ForeignPtr Optimizer
-&gt; ForeignPtr TensorList
-&gt; ForeignPtr Tensor
-&gt; IO (ForeignPtr TensorList)
</span><a href="Torch.Internal.Managed.Optim.html#unsafeStep"><span class="hs-identifier hs-var hs-var">unsafeStep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Ptr Optimizer
 -&gt; Ptr TensorList -&gt; Ptr Tensor -&gt; IO (Ptr TensorList))
-&gt; ForeignPtr Optimizer
-&gt; ForeignPtr TensorList
-&gt; ForeignPtr Tensor
-&gt; IO (ForeignPtr TensorList)
forall a ca x1 cx1 x2 cx2 y cy.
(Castable a ca, Castable x1 cx1, Castable x2 cx2, Castable y cy) =&gt;
(ca -&gt; cx1 -&gt; cx2 -&gt; IO cy) -&gt; a -&gt; x1 -&gt; x2 -&gt; IO y
</span><a href="Torch.Internal.Cast.html#cast3"><span class="hs-identifier hs-var">cast3</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Optimizer
-&gt; Ptr TensorList -&gt; Ptr Tensor -&gt; IO (Ptr TensorList)
</span><a href="Torch.Internal.Unmanaged.Optim.html#unsafeStep"><span class="hs-identifier hs-var">Unmanaged.unsafeStep</span></a></span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span class="annot"><a href="Torch.Internal.Managed.Optim.html#save"><span class="hs-identifier hs-type">save</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#Optimizer"><span class="hs-identifier hs-type">Optimizer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#StdString"><span class="hs-identifier hs-type">StdString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span id="save"><span class="annot"><span class="annottext">save :: ForeignPtr Optimizer -&gt; ForeignPtr StdString -&gt; IO ()
</span><a href="Torch.Internal.Managed.Optim.html#save"><span class="hs-identifier hs-var hs-var">save</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Ptr Optimizer -&gt; Ptr StdString -&gt; IO ())
-&gt; ForeignPtr Optimizer -&gt; ForeignPtr StdString -&gt; IO ()
forall a ca x1 cx1 y cy.
(Castable a ca, Castable x1 cx1, Castable y cy) =&gt;
(ca -&gt; cx1 -&gt; IO cy) -&gt; a -&gt; x1 -&gt; IO y
</span><a href="Torch.Internal.Cast.html#cast2"><span class="hs-identifier hs-var">cast2</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Optimizer -&gt; Ptr StdString -&gt; IO ()
</span><a href="Torch.Internal.Unmanaged.Optim.html#save"><span class="hs-identifier hs-var">Unmanaged.save</span></a></span><span>
</span><span id="line-148"></span><span>
</span><span id="line-149"></span><span class="annot"><a href="Torch.Internal.Managed.Optim.html#load"><span class="hs-identifier hs-type">load</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#Optimizer"><span class="hs-identifier hs-type">Optimizer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ForeignPtr</span></span><span> </span><span class="annot"><a href="Torch.Internal.Type.html#StdString"><span class="hs-identifier hs-type">StdString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-150"></span><span id="load"><span class="annot"><span class="annottext">load :: ForeignPtr Optimizer -&gt; ForeignPtr StdString -&gt; IO ()
</span><a href="Torch.Internal.Managed.Optim.html#load"><span class="hs-identifier hs-var hs-var">load</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Ptr Optimizer -&gt; Ptr StdString -&gt; IO ())
-&gt; ForeignPtr Optimizer -&gt; ForeignPtr StdString -&gt; IO ()
forall a ca x1 cx1 y cy.
(Castable a ca, Castable x1 cx1, Castable y cy) =&gt;
(ca -&gt; cx1 -&gt; IO cy) -&gt; a -&gt; x1 -&gt; IO y
</span><a href="Torch.Internal.Cast.html#cast2"><span class="hs-identifier hs-var">cast2</span></a></span><span> </span><span class="annot"><span class="annottext">Ptr Optimizer -&gt; Ptr StdString -&gt; IO ()
</span><a href="Torch.Internal.Unmanaged.Optim.html#load"><span class="hs-identifier hs-var">Unmanaged.load</span></a></span><span>
</span><span id="line-151"></span></pre></body></html>