<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DeriveAnyClass #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DeriveGeneric #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE QuasiQuotes #-}</span><span>
</span><span id="line-7"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">RenderClass</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/rqjngq2619zmma5zq1fzfx0c6n0ppcmf-yaml-lib-yaml-0.11.4.0-doc/share/doc/yaml/html/src"><span class="hs-identifier">Data.Yaml</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/rqjngq2619zmma5zq1fzfx0c6n0ppcmf-yaml-lib-yaml-0.11.4.0-doc/share/doc/yaml/html/src"><span class="hs-identifier">ParseException</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///nix/store/rqjngq2619zmma5zq1fzfx0c6n0ppcmf-yaml-lib-yaml-0.11.4.0-doc/share/doc/yaml/html/src"><span class="hs-identifier">Data.Yaml</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Y</span></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/ldzjfrallrxsllmkd7dy8g8mldsznlys-shakespeare-lib-shakespeare-2.0.24-doc/share/doc/shakespeare/html/src"><span class="hs-identifier">Text.Shakespeare.Text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/ldzjfrallrxsllmkd7dy8g8mldsznlys-shakespeare-lib-shakespeare-2.0.24-doc/share/doc/shakespeare/html/src"><span class="hs-identifier">st</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.String</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromString</span></span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.IO</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.Directory</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">createDirectoryIfMissing</span></span><span class="hs-special">)</span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="ParseClass.html"><span class="hs-identifier">ParseClass</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PC</span></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="RenderCommon.html"><span class="hs-identifier">RenderCommon</span></a></span><span>
</span><span id="line-19"></span><span>
</span><span id="line-20"></span><span class="annot"><a href="RenderClass.html#renderImport"><span class="hs-identifier hs-type">renderImport</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="ParseClass.html#CppClassSpec"><span class="hs-identifier hs-type">PC.CppClassSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-21"></span><span id="renderImport"><span class="annot"><span class="annottext">renderImport :: Bool -&gt; CppClassSpec -&gt; Text
</span><a href="RenderClass.html#renderImport"><span class="hs-identifier hs-var hs-var">renderImport</span></a></span></span><span> </span><span id="local-6989586621679321574"><span class="annot"><span class="annottext">is_managed :: Bool
</span><a href="#local-6989586621679321574"><span class="hs-identifier hs-var">is_managed</span></a></span></span><span> </span><span id="local-6989586621679321573"><span class="annot"><span class="annottext">typ_ :: CppClassSpec
</span><a href="#local-6989586621679321573"><span class="hs-identifier hs-var">typ_</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679321574"><span class="hs-identifier hs-var">is_managed</span></a></span><span> </span><span class="hs-keyword">then</span><span>  </span><span class="annot"><span class="">[st|
import Foreign.C.String
import Foreign.C.Types
import Foreign hiding (newForeignPtr)
import Foreign.Concurrent
import Torch.Internal.Type
import Torch.Internal.Class
import Torch.Internal.Cast
import Torch.Internal.Unmanaged.Type.Generator
import Torch.Internal.Unmanaged.Type.IntArray
import Torch.Internal.Unmanaged.Type.Scalar
import Torch.Internal.Unmanaged.Type.Storage
import Torch.Internal.Unmanaged.Type.Tensor
import Torch.Internal.Unmanaged.Type.TensorList
import Torch.Internal.Unmanaged.Type.TensorOptions
import Torch.Internal.Unmanaged.Type.Tuple
import Torch.Internal.Unmanaged.Type.StdString
import Torch.Internal.Unmanaged.Type.Dimname
import Torch.Internal.Unmanaged.Type.DimnameList

import qualified #{&quot;Torch.Internal.Unmanaged.Type.&quot; &lt;&gt; (PC.hsnameWithoutSpace typ_)} as Unmanaged
|]</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="">[st|
import qualified Language.C.Inline.Cpp as C
import qualified Language.C.Inline.Cpp.Exceptions as C
import qualified Language.C.Inline.Context as C
import qualified Language.C.Types as C
import qualified Data.Map as Map
import Foreign.C.String
import Foreign.C.Types
import Foreign hiding (newForeignPtr)
import Foreign.Concurrent
import Torch.Internal.Type
import Torch.Internal.Class

C.context $ C.cppCtx &lt;&gt; mempty { C.ctxTypesTable = typeTable }

C.include &quot;&lt;ATen/ATen.h&gt;&quot;
C.include &quot;&lt;vector&gt;&quot;
|]</span></span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span class="annot"><a href="RenderClass.html#renderConstructors"><span class="hs-identifier hs-type">renderConstructors</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="ParseClass.html#CppClassSpec"><span class="hs-identifier hs-type">PC.CppClassSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-63"></span><span id="renderConstructors"><span class="annot"><span class="annottext">renderConstructors :: Bool -&gt; CppClassSpec -&gt; Text
</span><a href="RenderClass.html#renderConstructors"><span class="hs-identifier hs-var hs-var">renderConstructors</span></a></span></span><span> </span><span id="local-6989586621679321563"><span class="annot"><span class="annottext">is_managed :: Bool
</span><a href="#local-6989586621679321563"><span class="hs-identifier hs-var">is_managed</span></a></span></span><span> </span><span id="local-6989586621679321562"><span class="annot"><span class="annottext">typ_ :: CppClassSpec
</span><a href="#local-6989586621679321562"><span class="hs-identifier hs-var">typ_</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Text
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; Text) -&gt; [Text] -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Function -&gt; Text) -&gt; [Function] -&gt; [Text]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CppClassSpec
-&gt; Bool -&gt; Bool -&gt; Bool -&gt; String -&gt; String -&gt; Function -&gt; Text
</span><a href="RenderCommon.html#methodToCpp"><span class="hs-identifier hs-var">methodToCpp</span></a></span><span> </span><span class="annot"><span class="annottext">CppClassSpec
</span><a href="#local-6989586621679321562"><span class="hs-identifier hs-var">typ_</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679321563"><span class="hs-identifier hs-var">is_managed</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CppClassSpec -&gt; [Function]
</span><a href="ParseClass.html#constructors"><span class="hs-identifier hs-var hs-var">PC.constructors</span></a></span><span> </span><span class="annot"><span class="annottext">CppClassSpec
</span><a href="#local-6989586621679321562"><span class="hs-identifier hs-var">typ_</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span class="annot"><a href="RenderClass.html#renderDestructor"><span class="hs-identifier hs-type">renderDestructor</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="ParseClass.html#CppClassSpec"><span class="hs-identifier hs-type">PC.CppClassSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-66"></span><span id="renderDestructor"><span class="annot"><span class="annottext">renderDestructor :: Bool -&gt; CppClassSpec -&gt; Text
</span><a href="RenderClass.html#renderDestructor"><span class="hs-identifier hs-var hs-var">renderDestructor</span></a></span></span><span> </span><span id="local-6989586621679321558"><span class="annot"><span class="annottext">is_managed :: Bool
</span><a href="#local-6989586621679321558"><span class="hs-identifier hs-var">is_managed</span></a></span></span><span> </span><span id="local-6989586621679321557"><span class="annot"><span class="annottext">typ_ :: CppClassSpec
</span><a href="#local-6989586621679321557"><span class="hs-identifier hs-var">typ_</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679321558"><span class="hs-identifier hs-var">is_managed</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="">[st|
delete#{PC.hsnameWithoutSpace typ_} :: Ptr #{PC.hsnameWithParens typ_} -&gt; IO ()
delete#{PC.hsnameWithoutSpace typ_} object = #{bra}C.throwBlock| void { delete $(#{PC.cppname typ_}* object);}|#{cket}

instance CppObject #{PC.hsnameWithParens typ_} where
  fromPtr ptr = newForeignPtr ptr (delete#{PC.hsnameWithoutSpace typ_} ptr)
|]</span></span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span class="annot"><a href="RenderClass.html#renderMethods"><span class="hs-identifier hs-type">renderMethods</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="ParseClass.html#CppClassSpec"><span class="hs-identifier hs-type">PC.CppClassSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-76"></span><span id="renderMethods"><span class="annot"><span class="annottext">renderMethods :: Bool -&gt; CppClassSpec -&gt; Text
</span><a href="RenderClass.html#renderMethods"><span class="hs-identifier hs-var hs-var">renderMethods</span></a></span></span><span> </span><span id="local-6989586621679321551"><span class="annot"><span class="annottext">is_managed :: Bool
</span><a href="#local-6989586621679321551"><span class="hs-identifier hs-var">is_managed</span></a></span></span><span> </span><span id="local-6989586621679321550"><span class="annot"><span class="annottext">typ_ :: CppClassSpec
</span><a href="#local-6989586621679321550"><span class="hs-identifier hs-var">typ_</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Text
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; Text) -&gt; [Text] -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Function -&gt; Text) -&gt; [Function] -&gt; [Text]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CppClassSpec
-&gt; Bool -&gt; Bool -&gt; Bool -&gt; String -&gt; String -&gt; Function -&gt; Text
</span><a href="RenderCommon.html#methodToCpp"><span class="hs-identifier hs-var">methodToCpp</span></a></span><span> </span><span class="annot"><span class="annottext">CppClassSpec
</span><a href="#local-6989586621679321550"><span class="hs-identifier hs-var">typ_</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679321551"><span class="hs-identifier hs-var">is_managed</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CppClassSpec -&gt; [Function]
</span><a href="ParseClass.html#methods"><span class="hs-identifier hs-var hs-var">PC.methods</span></a></span><span> </span><span class="annot"><span class="annottext">CppClassSpec
</span><a href="#local-6989586621679321550"><span class="hs-identifier hs-var">typ_</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span class="annot"><a href="RenderClass.html#renderFunctions"><span class="hs-identifier hs-type">renderFunctions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="ParseClass.html#CppClassSpec"><span class="hs-identifier hs-type">PC.CppClassSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-79"></span><span id="renderFunctions"><span class="annot"><span class="annottext">renderFunctions :: Bool -&gt; CppClassSpec -&gt; Text
</span><a href="RenderClass.html#renderFunctions"><span class="hs-identifier hs-var hs-var">renderFunctions</span></a></span></span><span> </span><span id="local-6989586621679321547"><span class="annot"><span class="annottext">is_managed :: Bool
</span><a href="#local-6989586621679321547"><span class="hs-identifier hs-var">is_managed</span></a></span></span><span> </span><span id="local-6989586621679321546"><span class="annot"><span class="annottext">typ_ :: CppClassSpec
</span><a href="#local-6989586621679321546"><span class="hs-identifier hs-var">typ_</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Text
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; Text) -&gt; [Text] -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Function -&gt; Text) -&gt; [Function] -&gt; [Text]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; String -&gt; String -&gt; Function -&gt; Text
</span><a href="RenderCommon.html#functionToCpp"><span class="hs-identifier hs-var">functionToCpp</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679321547"><span class="hs-identifier hs-var">is_managed</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="hs-string">&quot;at::&quot;</span></span><span> </span><span class="annot"><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CppClassSpec -&gt; [Function]
</span><a href="ParseClass.html#functions"><span class="hs-identifier hs-var hs-var">PC.functions</span></a></span><span> </span><span class="annot"><span class="annottext">CppClassSpec
</span><a href="#local-6989586621679321546"><span class="hs-identifier hs-var">typ_</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span class="annot"><a href="RenderClass.html#decodeAndCodeGen"><span class="hs-identifier hs-type">decodeAndCodeGen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span id="decodeAndCodeGen"><span class="annot"><span class="annottext">decodeAndCodeGen :: String -&gt; String -&gt; IO ()
</span><a href="RenderClass.html#decodeAndCodeGen"><span class="hs-identifier hs-var hs-var">decodeAndCodeGen</span></a></span></span><span> </span><span id="local-6989586621679321542"><span class="annot"><span class="annottext">basedir :: String
</span><a href="#local-6989586621679321542"><span class="hs-identifier hs-var">basedir</span></a></span></span><span> </span><span id="local-6989586621679321541"><span class="annot"><span class="annottext">fileName :: String
</span><a href="#local-6989586621679321541"><span class="hs-identifier hs-var">fileName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-83"></span><span>  </span><span id="local-6989586621679321540"><span class="annot"><span class="annottext">Either ParseException CppClassSpec
</span><a href="#local-6989586621679321540"><span class="hs-identifier hs-var">funcs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO (Either ParseException CppClassSpec)
forall a. FromJSON a =&gt; String -&gt; IO (Either ParseException a)
</span><a href="../file:///nix/store/rqjngq2619zmma5zq1fzfx0c6n0ppcmf-yaml-lib-yaml-0.11.4.0-doc/share/doc/yaml/html/src"><span class="hs-identifier hs-var">Y.decodeFileEither</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679321541"><span class="hs-identifier hs-var">fileName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="../file:///nix/store/rqjngq2619zmma5zq1fzfx0c6n0ppcmf-yaml-lib-yaml-0.11.4.0-doc/share/doc/yaml/html/src"><span class="hs-identifier hs-type">ParseException</span></a></span><span> </span><span class="annot"><a href="ParseClass.html#CppClassSpec"><span class="hs-identifier hs-type">PC.CppClassSpec</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either ParseException CppClassSpec
</span><a href="#local-6989586621679321540"><span class="hs-identifier hs-var">funcs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-85"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679321538"><span class="annot"><span class="annottext">err' :: ParseException
</span><a href="#local-6989586621679321538"><span class="hs-identifier hs-var">err'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ParseException -&gt; IO ()
forall a. Show a =&gt; a -&gt; IO ()
</span><span class="hs-identifier hs-var">print</span></span><span> </span><span class="annot"><span class="annottext">ParseException
</span><a href="#local-6989586621679321538"><span class="hs-identifier hs-var">err'</span></a></span><span>
</span><span id="line-86"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679321537"><span class="annot"><span class="annottext">fns :: CppClassSpec
</span><a href="#local-6989586621679321537"><span class="hs-identifier hs-var">fns</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-87"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; String -&gt; IO ()
</span><span class="hs-identifier hs-var">createDirectoryIfMissing</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679321542"><span class="hs-identifier hs-var">basedir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="hs-string">&quot;/Torch/Internal/Unmanaged/Type&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; Text -&gt; IO ()
</span><span class="hs-identifier hs-var">T.writeFile</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679321542"><span class="hs-identifier hs-var">basedir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="hs-string">&quot;/Torch/Internal/Unmanaged/Type/&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">CppClassSpec -&gt; String
</span><a href="ParseClass.html#hsnameWithoutSpace"><span class="hs-identifier hs-var">PC.hsnameWithoutSpace</span></a></span><span> </span><span class="annot"><span class="annottext">CppClassSpec
</span><a href="#local-6989586621679321537"><span class="hs-identifier hs-var">fns</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="hs-string">&quot;.hs&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Text -&gt; IO ()) -&gt; Text -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-89"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; Text -&gt; CppClassSpec -&gt; Text
</span><a href="RenderClass.html#template"><span class="hs-identifier hs-var">template</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;Torch.Internal.Unmanaged.Type.&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
forall a. IsString a =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">fromString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CppClassSpec -&gt; String
</span><a href="ParseClass.html#hsnameWithoutSpace"><span class="hs-identifier hs-var">PC.hsnameWithoutSpace</span></a></span><span> </span><span class="annot"><span class="annottext">CppClassSpec
</span><a href="#local-6989586621679321537"><span class="hs-identifier hs-var">fns</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CppClassSpec
</span><a href="#local-6989586621679321537"><span class="hs-identifier hs-var">fns</span></a></span><span>
</span><span id="line-90"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; String -&gt; IO ()
</span><span class="hs-identifier hs-var">createDirectoryIfMissing</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679321542"><span class="hs-identifier hs-var">basedir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="hs-string">&quot;/Torch/Internal/Managed/Type&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; Text -&gt; IO ()
</span><span class="hs-identifier hs-var">T.writeFile</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679321542"><span class="hs-identifier hs-var">basedir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="hs-string">&quot;/Torch/Internal/Managed/Type/&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">CppClassSpec -&gt; String
</span><a href="ParseClass.html#hsnameWithoutSpace"><span class="hs-identifier hs-var">PC.hsnameWithoutSpace</span></a></span><span> </span><span class="annot"><span class="annottext">CppClassSpec
</span><a href="#local-6989586621679321537"><span class="hs-identifier hs-var">fns</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="hs-string">&quot;.hs&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Text -&gt; IO ()) -&gt; Text -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-92"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; Text -&gt; CppClassSpec -&gt; Text
</span><a href="RenderClass.html#template"><span class="hs-identifier hs-var">template</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;Torch.Internal.Managed.Type.&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
forall a. IsString a =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">fromString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CppClassSpec -&gt; String
</span><a href="ParseClass.html#hsnameWithoutSpace"><span class="hs-identifier hs-var">PC.hsnameWithoutSpace</span></a></span><span> </span><span class="annot"><span class="annottext">CppClassSpec
</span><a href="#local-6989586621679321537"><span class="hs-identifier hs-var">fns</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CppClassSpec
</span><a href="#local-6989586621679321537"><span class="hs-identifier hs-var">fns</span></a></span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span class="annot"><a href="RenderClass.html#template"><span class="hs-identifier hs-type">template</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="ParseClass.html#CppClassSpec"><span class="hs-identifier hs-type">PC.CppClassSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-96"></span><span id="template"><span class="annot"><span class="annottext">template :: Bool -&gt; Text -&gt; CppClassSpec -&gt; Text
</span><a href="RenderClass.html#template"><span class="hs-identifier hs-var hs-var">template</span></a></span></span><span> </span><span id="local-6989586621679321534"><span class="annot"><span class="annottext">is_managed :: Bool
</span><a href="#local-6989586621679321534"><span class="hs-identifier hs-var">is_managed</span></a></span></span><span> </span><span id="local-6989586621679321533"><span class="annot"><span class="annottext">module_name :: Text
</span><a href="#local-6989586621679321533"><span class="hs-identifier hs-var">module_name</span></a></span></span><span> </span><span id="local-6989586621679321532"><span class="annot"><span class="annottext">types :: CppClassSpec
</span><a href="#local-6989586621679321532"><span class="hs-identifier hs-var">types</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="">[st|
{-# LANGUAGE DataKinds #-}
{-# LANGUAGE PolyKinds #-}
{-# LANGUAGE TemplateHaskell #-}
{-# LANGUAGE QuasiQuotes #-}
{-# LANGUAGE ScopedTypeVariables #-}
{-# LANGUAGE OverloadedStrings #-}
{-# LANGUAGE TypeFamilies #-}
{-# LANGUAGE FlexibleInstances #-}

module #{module_name} where

#{renderImport is_managed types}

#{renderConstructors is_managed types}

#{renderDestructor is_managed types}

#{renderMethods is_managed types}

#{renderFunctions is_managed types}
|]</span></span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span></pre></body></html>